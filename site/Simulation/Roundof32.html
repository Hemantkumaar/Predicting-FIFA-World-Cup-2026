<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Round of 32 - FIFA 2026</title>

<style>
body{
margin:0;
font-family:system-ui;
background:linear-gradient(180deg,#070b14,#0b1220);
color:white;
}

.container{
max-width:1300px;
margin:auto;
padding:40px 20px;
}

h1{text-align:center;margin-bottom:30px;}

.match{
background:rgba(18,28,51,.85);
padding:20px;
border-radius:15px;
border:1px solid rgba(255,255,255,.1);
margin-bottom:25px;
}

.teams{
display:flex;
gap:15px;
}

.teamBtn{
flex:1;
padding:12px;
border-radius:10px;
border:1px solid rgba(255,255,255,.2);
background:rgba(255,255,255,.05);
color:white;
font-weight:bold;
cursor:pointer;
}

.teamBtn:disabled{
opacity:.5;
cursor:not-allowed;
}

.predictBtn{
margin-top:15px;
padding:8px 14px;
background:#f6c453;
border:none;
border-radius:8px;
cursor:pointer;
font-weight:bold;
}

.results{
margin-top:10px;
font-size:14px;
color:#ccc;
}

.nextBtn{
position:fixed;
bottom:30px;
right:30px;
width:60px;
height:60px;
border-radius:50%;
border:none;
background:linear-gradient(135deg,#f6c453,#d4a017);
color:#000;
font-size:26px;
font-weight:bold;
cursor:pointer;
}

.simAllBtn{
margin-bottom:30px;
padding:10px 20px;
background:#28a745;
border:none;
border-radius:10px;
color:white;
font-weight:bold;
cursor:pointer;
}
</style>
</head>

<body>

<!-- persistent soundtrack for tournament flow; Waka Waka URL -->
<audio id="globalSong" src="https://audio.com/mer-2/audio/shakira-waka-waka-this-time-for-africa-mp3bitcc" preload="auto"></audio>

<div class="container">
<h1>ğŸ† Round of 32</h1>

<button class="simAllBtn" onclick="simulateAll()">Simulate All Matches</button>

<div id="matches"></div>
</div>

<button class="nextBtn" onclick="goNext()">âœ</button>

<script>

/* -------- GLOBAL SOUNDTRACK CONTROLS -------- */
function initGlobalSong(){
	const song=document.getElementById('globalSong');
	if(!song) return;
	const t=parseFloat(localStorage.getItem('songTime')||0);
	if(!isNaN(t)) song.currentTime=t;
	if(localStorage.getItem('songPlaying')==='true') song.play().catch(()=>{});
	setInterval(()=>localStorage.setItem('songTime',song.currentTime),500);
	song.addEventListener('play',()=>localStorage.setItem('songPlaying','true'));
	song.addEventListener('pause',()=>localStorage.setItem('songPlaying','false'));
}
document.addEventListener('DOMContentLoaded',initGlobalSong);

/* -------- 32 TEAMS (STATIC FOR STABILITY) -------- */

const TEAMS = [
{name:"ğŸ‡²ğŸ‡½ Mexico",perf:72.5},
{name:"ğŸ‡¨ğŸ‡­ Switzerland",perf:63.1},
{name:"ğŸ‡§ğŸ‡· Brazil",perf:79.4},
{name:"ğŸ‡µğŸ‡¹ Portugal",perf:72.4},
{name:"ğŸ‡ºğŸ‡¸ USA",perf:68.9},
{name:"ğŸ‡ªğŸ‡¸ Spain",perf:73.8},
{name:"ğŸ‡«ğŸ‡· France",perf:76},
{name:"ğŸ‡¦ğŸ‡· Argentina",perf:77.6},
{name:"ğŸ‡³ğŸ‡± Netherlands",perf:71.3},
{name:"ğŸ‡©ğŸ‡ª Germany",perf:74},
{name:"ğŸ‡§ğŸ‡ª Belgium",perf:67.2},
{name:"ğŸ´ England",perf:74.7},
{name:"ğŸ‡¯ğŸ‡µ Japan",perf:62.9},
{name:"ğŸ‡ºğŸ‡¾ Uruguay",perf:66.1},
{name:"ğŸ‡¨ğŸ‡¦ Canada",perf:70.2},
{name:"ğŸ‡¨ğŸ‡´ Colombia",perf:60.9},
{name:"ğŸ‡¸ğŸ‡³ Senegal",perf:58.8},
{name:"ğŸ‡µğŸ‡± Poland",perf:55},
{name:"ğŸ‡°ğŸ‡· South Korea",perf:66.7},
{name:"ğŸ‡¦ğŸ‡º Australia",perf:59.7},
{name:"ğŸ‡ªğŸ‡¬ Egypt",perf:54.8},
{name:"ğŸ‡®ğŸ‡· Iran",perf:52.6},
{name:"ğŸ‡¦ğŸ‡¹ Austria",perf:58.1},
{name:"ğŸ‡³ğŸ‡´ Norway",perf:55.9},
{name:"ğŸ‡µğŸ‡¾ Paraguay",perf:56.4},
{name:"ğŸ‡¸ğŸ‡¦ Saudi Arabia",perf:53.7},
{name:"ğŸ‡¨ğŸ‡® Ivory Coast",perf:55.2},
{name:"ğŸ‡ªğŸ‡¨ Ecuador",perf:57.6},
{name:"ğŸ‡²ğŸ‡¦ Morocco",perf:61},
{name:"ğŸ‡­ğŸ‡· Croatia",perf:63.5},
{name:"ğŸ‡¬ğŸ‡­ Ghana",perf:52},
{name:"ğŸ‡µğŸ‡¦ Panama",perf:48.4}
];

/* -------- VARIABLES -------- */

let winners = new Array(16).fill(null);
let votes = {};
let locked = {};

const container=document.getElementById("matches");

/* -------- GENERATE MATCHES -------- */

for(let i=0;i<32;i+=2){

votes[i]={t1:0,t2:0};
locked[i]=false;

const team1=TEAMS[i];
const team2=TEAMS[i+1];

const div=document.createElement("div");
div.className="match";

div.innerHTML=`
<div class="teams">
<button class="teamBtn" id="t1-${i}" onclick="vote(${i},1)">
${team1.name}
</button>
<button class="teamBtn" id="t2-${i}" onclick="vote(${i},2)">
${team2.name}
</button>
</div>

<div class="results" id="results-${i}">
Total votes: 0<br>
${team1.name} â€“ 0 votes (â€”)<br>
${team2.name} â€“ 0 votes (â€”)
</div>

<button class="predictBtn" onclick="predict(${i})">
Run 10,000 Simulations
</button>
`;

container.appendChild(div);
}

/* -------- VOTING -------- */

function vote(i,team){
if(locked[i]) return;

if(team===1) votes[i].t1++;
else votes[i].t2++;

locked[i]=true;
document.getElementById(`t1-${i}`).disabled=true;
document.getElementById(`t2-${i}`).disabled=true;

updateResults(i);
}

function updateResults(i){
const t1=votes[i].t1;
const t2=votes[i].t2;
const total=t1+t2;

let s1="â€”",s2="â€”";
if(total>0){
s1=((t1/total)*100).toFixed(1)+"%";
s2=((t2/total)*100).toFixed(1)+"%";
}

const team1=TEAMS[i];
const team2=TEAMS[i+1];

document.getElementById(`results-${i}`).innerHTML=`
Total votes: ${total}<br>
${team1.name} â€“ ${t1} votes (${s1})<br>
${team2.name} â€“ ${t2} votes (${s2})
`;
}

/* -------- MONTE CARLO -------- */

function predict(i){

const team1=TEAMS[i];
const team2=TEAMS[i+1];

const SIM=10000;
let t1Wins=0, t2Wins=0;

for(let s=0;s<SIM;s++){
const total=team1.perf+team2.perf;
const prob=team1.perf/total;
if(Math.random()<prob) t1Wins++;
else t2Wins++;
}

const winner = t1Wins>t2Wins ? team1 : team2;

/* SAVE WINNER PROPERLY */
winners[i/2]=winner;

localStorage.setItem("round32_winners", JSON.stringify(winners));

alert(`${winner.name} advances!`);
}

/* -------- SIMULATE ALL -------- */

function simulateAll(){
for(let i=0;i<32;i+=2){
predict(i);
}
alert("All matches simulated!");
}

/* -------- NEXT BUTTON -------- */

function goNext(){
const saved=JSON.parse(localStorage.getItem("round32_winners"))||[];

if(saved.filter(Boolean).length!==16){
alert("Complete all 16 matches first!");
return;
}

	window.location.href="Roundof16.html";
}

</script>

</body>
</html>